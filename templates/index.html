<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>🎟️ Ticket Monitor Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#8b5cf6',
            highlight: '#22c55e',
            danger: '#ef4444',
          },
          animation: {
            fade: 'fadeIn 1s ease-in-out',
            pulseFast: 'pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: 0 },
              '100%': { opacity: 1 },
            }
          },
          backgroundImage: {
            pattern: "radial-gradient(circle, rgba(255,255,255,0.2) 1px, transparent 1px)",
          }
        }
      }
    };
  </script>
</head>
<body class="bg-gradient-to-br from-purple-100 to-pink-100 min-h-screen text-gray-800 font-sans p-6 relative">

  <!-- Subtle Background Pattern -->
  <div class="absolute inset-0 bg-[length:20px_20px] bg-pattern opacity-10 z-0"></div>

  <div class="relative z-10 max-w-4xl mx-auto space-y-6">
    <h1 class="text-5xl font-black text-center text-primary drop-shadow-sm animate-fade tracking-tight">
      🎭 Ticket Monitor Dashboard
    </h1>

    <div class="bg-white shadow-2xl rounded-2xl p-6 border border-gray-200 transition-all hover:shadow-purple-300">
      <div class="flex justify-between items-center mb-4">
        <p id="lastChecked" class="text-sm text-gray-500 italic">Last Checked: ...</p>
        <span class="inline-flex items-center text-xs px-2 py-1 rounded-full bg-primary text-white animate-pulseFast">
          🔄 Auto-refreshing
        </span>
      </div>

      <ul id="changesList" class="space-y-4">
        <li class="text-gray-500 animate-pulse">⏳ Loading updates...</li>
      </ul>
    </div>
  </div>

  <script>
    async function update() {
      const res = await fetch("/status");
      const data = await res.json();
      document.getElementById("lastChecked").textContent =
        "Last Checked: " + new Date(data.last_checked).toLocaleString("es-ES");

      const list = document.getElementById("changesList");
      list.innerHTML = "";

      if (data.changes.length === 0) {
        const li = document.createElement("li");
        li.className = "text-sm text-gray-400 italic";
        li.innerHTML = "✅ No new changes detected.";
        list.appendChild(li);
      } else {
        data.changes.forEach(change => {
          const li = document.createElement("li");
          li.className = "bg-gradient-to-r from-purple-50 to-pink-50 border border-gray-300 p-4 rounded-xl shadow hover:border-primary transition-all animate-fade flex items-start gap-2";
          li.innerHTML = `<span class="text-2xl">🎫</span><span>${change}</span>`;
          list.appendChild(li);
        });
      }
    }

    update();
    setInterval(update, 10000);
  </script>
</body>
</html>
