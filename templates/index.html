<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üéüÔ∏è Ticket Monitor Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img src="{{ url_for('static', filename='logo.png') }}" alt="logo" class="logo">
      <h1>Ticket Monitor</h1>
      <small class="subtitle">Cute & dynamic musical watcher</small>
    </div>

    <div class="controls">
      <input id="search" type="search" placeholder="Buscar musical..." aria-label="Buscar musical">
      <button id="toggle-refresh" class="btn soft">Auto-refresh: <span id="ar-state">OFF</span></button>
      <div class="last-checked">Last Checked: <span id="last-checked">--</span></div>
    </div>
  </header>

  <main class="container">
    <!-- Slideshow (kept in HTML) -->
    <div class="slideshow-container">
      <div class="slide fade"><img src="{{ url_for('static', filename='BOM1.jpg') }}" alt="BOM1" class="slide-img"></div>
      <div class="slide fade"><img src="{{ url_for('static', filename='BOM2.jpg') }}" alt="BOM2" class="slide-img"></div>
      <div class="slide fade"><img src="{{ url_for('static', filename='BOM3.jpg') }}" alt="BOM3" class="slide-img"></div>
      <div class="slide fade"><img src="{{ url_for('static', filename='AUDREY1.jpg') }}" alt="AUDREY1" class="slide-img"></div>
      <div class="slide fade"><img src="{{ url_for('static', filename='HOUDINI1.jpg') }}" alt="HOUDINI1" class="slide-img"></div>
      <div class="slide fade"><img src="{{ url_for('static', filename='LESMIS1.jpg') }}" alt="LESMIS1" class="slide-img"></div>
      <div class="slide fade"><img src="{{ url_for('static', filename='LESMIS2.jpg') }}" alt="LESMIS2" class="slide-img"></div>
      <div class="slide fade"><img src="{{ url_for('static', filename='LESMIS3.png') }}" alt="LESMIS3" class="slide-img"></div>
      <div class="slide fade"><img src="{{ url_for('static', filename='LESMIS4.jpg') }}" alt="LESMIS4" class="slide-img"></div>
      <div class="slide fade"><img src="{{ url_for('static', filename='LESMIS5.jpg') }}" alt="LESMIS5" class="slide-img"></div>
      <div class="slide fade"><img src="{{ url_for('static', filename='LESMIS6.jpg') }}" alt="LESMIS6" class="slide-img"></div>
      <div class="slide fade"><img src="{{ url_for('static', filename='LESMIS7.jpg') }}" alt="LESMIS7" class="slide-img"></div>
      <div class="slide fade"><img src="{{ url_for('static', filename='WICKED1.jpg') }}" alt="WICKED1" class="slide-img"></div>
      <div class="slide fade"><img src="{{ url_for('static', filename='WICKED2.jpg') }}" alt="WICKED2" class="slide-img"></div>
      <div class="slide fade"><img src="{{ url_for('static', filename='WICKED3.jpg') }}" alt="WICKED3" class="slide-img"></div>
      <div class="slide fade"><img src="{{ url_for('static', filename='WICKED4.jpg') }}" alt="WICKED4" class="slide-img"></div>
      <div class="slide fade"><img src="{{ url_for('static', filename='WICKED5.jpg') }}" alt="WICKED5" class="slide-img"></div>
      <div class="slide fade"><img src="{{ url_for('static', filename='WICKED6.jpg') }}" alt="WICKED6" class="slide-img"></div>
      <div class="slide fade"><img src="{{ url_for('static', filename='WICKED7.jpg') }}" alt="WICKED7" class="slide-img"></div>
      <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
      <a class="next" onclick="plusSlides(1)">&#10095;</a>
    </div>

    <section class="hero">
      <div class="hero-inner">
        <h2>Keep an eye on ticket pages</h2>
        <p class="muted">Live checks, friendly UI, and quick links to ticket pages.</p>
      </div>
    </section>

    <!-- Table with collapsible rows -->
    <section class="table-wrap" id="table-wrap">
      <table id="musicals-table" class="musicals-table">
        <thead>
          <tr>
            <th></th>
            <th>Musical</th>
            <th>URLs</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="table-body">
          <!-- populated by main.js -->
        </tbody>
      </table>

      <div class="no-data" id="no-data" hidden>
        <p>Ning√∫n sitio monitorizado. Agrega entradas en <code>urls.json</code>.</p>
      </div>
    </section>
  </main>

  <div id="modal" class="modal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true">
      <button id="modal-close" class="close">&times;</button>
      <h3 id="modal-title"></h3>
      <ul id="modal-list" class="url-list"></ul>
    </div>
  </div>

  <footer class="footer">
    <small>Made with üíñ ‚Äî dynamic cute monitor</small>
  </footer>

  <script id="initial-data" type="application/json">{{ (musicals | default([])) | tojson }}</script>
  <script>
    const INITIAL_MUSICALS = JSON.parse(document.getElementById('initial-data').textContent || '[]');
  </script>
  <script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>