<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üéüÔ∏è Ticket Monitor Dashboard</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img src="{{ url_for('static', filename='logo.png') }}" alt="logo" class="logo">
      <div>
        <h1>Ticket Monitor</h1>
        <div class="subtitle">Cute & dynamic musical watcher</div>
      </div>
    </div>

    <div class="controls">
      <input id="search" type="search" placeholder="Buscar musical..." aria-label="Buscar musical">
      <button id="toggle-refresh" class="btn soft">Auto-refresh: <span id="ar-state">OFF</span></button>
      <div class="last-checked">Last Checked: <span id="last-checked">--</span></div>
    </div>
  </header>

  <main class="container">
    <!-- Slideshow (kept in HTML) -->
    <div class="slideshow-container">
      <div class="slides">
        <div class="slide fade"><img src="{{ url_for('static', filename='BOM1.jpg') }}" alt="BOM1" class="slide-img"></div>
        <div class="slide fade"><img src="{{ url_for('static', filename='WICKED1.jpg') }}" alt="WICKED1" class="slide-img"></div>
        <div class="slide fade"><img src="{{ url_for('static', filename='LESMIS1.jpg') }}" alt="LESMIS1" class="slide-img"></div>
      </div>
      <button class="slide-nav prev" onclick="plusSlides(-1)" aria-label="previous">‚Äπ</button>
      <button class="slide-nav next" onclick="plusSlides(1)" aria-label="next">‚Ä∫</button>
      <div class="slide-dots" aria-hidden="true"></div>
    </div>

    <section class="hero">
      <div class="hero-inner">
        <h2>Keep an eye on ticket pages</h2>
        <p class="muted">Live checks, friendly UI, and quick links to ticket pages.</p>
      </div>
    </section>

    <!-- Table with collapsible rows -->
    <section class="table-wrap" id="table-wrap" aria-live="polite">
      <table id="musicals-table" class="musicals-table" role="table" aria-label="Sitios monitorizados">
        <thead>
          <tr>
            <th aria-hidden="true"></th>
            <th>Musical</th>
            <th>URLs</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="table-body">
          <!-- populated by main.js -->
        </tbody>
      </table>

      <div class="no-data" id="no-data" hidden>
        <p>Ning√∫n sitio monitorizado. Agrega entradas en <code>urls.json</code>.</p>
      </div>
    </section>
  </main>

  <div id="modal" class="modal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modal-title">
      <button id="modal-close" class="close" aria-label="Cerrar">&times;</button>
      <h3 id="modal-title"></h3>
      <ul id="modal-list" class="url-list"></ul>
    </div>
  </div>

  <footer class="footer">
    <small>Made with üíñ ‚Äî dynamic cute monitor</small>
  </footer>

  <script id="initial-data" type="application/json">{{ (musicals | default([])) | tojson }}</script>
  <script>
    const INITIAL_MUSICALS = JSON.parse(document.getElementById('initial-data').textContent || '[]');
  </script>
  <script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>