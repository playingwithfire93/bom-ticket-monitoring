<script>
  async function loadChanges() {
    const container = document.getElementById("changesContainer");
    try {
      const res = await fetch("/changes");
      const data = await res.json();

      container.innerHTML = ""; // Clear previous content

      data.forEach(change => {
        const card = document.createElement("div");
        card.className = "card";

        card.innerHTML = `
          <h3>${change.site}</h3>
          <p>Status: ${change.status}</p>
          <p>Message: ${change.message}</p>
          <time>Last checked: ${change.timestamp}</time>
        `;

        container.appendChild(card);
      });
    } catch (err) {
      container.innerHTML = "<p>⚠️ Could not load data. Check connection or server.</p>";
    }
  }

  loadChanges(); // Initial load
  setInterval(loadChanges, 15000); // Refresh every 15 seconds
</script>
