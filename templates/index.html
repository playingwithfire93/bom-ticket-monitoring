<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>🎟️ Ticket Monitor Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#ec4899', // PINK-500
            highlight: '#f472b6', // PINK-400
            background: '#ffe4e6', // PINK-100
          },
          animation: {
            fade: 'fadeIn 0.8s ease-in-out',
            pulseFast: 'pulse 1.5s ease-in-out infinite',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: 0 },
              '100%': { opacity: 1 },
            }
          },
          backgroundImage: {
            pattern: "radial-gradient(circle, rgba(255,255,255,0.2) 1px, transparent 1px)",
          }
        }
      }
    };
  </script>
</head>
<body class="bg-gradient-to-br from-pink-100 to-pink-200 min-h-screen text-gray-800 font-sans p-6 relative">

  <!-- Background Pattern -->
  <div class="absolute inset-0 bg-[length:20px_20px] bg-pattern opacity-10 z-0 pointer-events-none"></div>

  <div class="relative z-10 max-w-6xl mx-auto space-y-6">
    <h1 class="text-5xl font-black text-center text-primary drop-shadow-sm animate-fade tracking-tight">
      🎀 Ticket Monitor Dashboard
    </h1>

    <div class="bg-white shadow-xl rounded-2xl p-6 border border-pink-200 transition hover:shadow-pink-300">
      <div class="flex justify-between items-center mb-4 flex-wrap gap-2">
        <p id="lastChecked" class="text-sm text-pink-600 italic">Last Checked: ...</p>
        <span class="inline-flex items-center text-xs px-2 py-1 rounded-full bg-primary text-white animate-pulseFast">
          🔄 Auto-refreshing
        </span>
      </div>

      <!-- Responsive Grid: 3 columns on md+ screens -->
      <div id="changesList" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
        <div class="text-gray-500 animate-pulse col-span-full">⏳ Loading updates...</div>
      </div>
    </div>
  </div>

  <script>
    async function update() {
      const res = await fetch("/status");
      const data = await res.json();
      document.getElementById("lastChecked").textContent =
        "Last Checked: " + new Date(data.last_checked).toLocaleString("es-ES");

      const list = document.getElementById("changesList");
      list.innerHTML = "";

      if (data.changes.length === 0) {
        const li = document.createElement("div");
        li.className = "text-sm text-pink-500 italic col-span-full";
        li.innerHTML = "✅ No new changes detected.";
        list.appendChild(li);
      } else {
        data.changes.forEach(change => {
          const card = document.createElement("div");
          card.className = "bg-pink-50 border border-pink-300 p-4 rounded-xl shadow hover:shadow-md hover:border-primary transition-all animate-fade";
          card.innerHTML = `
            <div class="flex items-start gap-2">
              <span class="text-2xl">🎫</span>
              <span class="text-sm text-gray-700">${change}</span>
            </div>
          `;
          list.appendChild(card);
        });
      }
    }

    update();
    setInterval(update, 10000);
  </script>
</body>
</html>
